FROM ubuntu:jammy as build
COPY character_recognition character_recognition
COPY common common
COPY external external
RUN apt update && apt install -y make g++ libboost-dev libpng-dev
RUN make -C character_recognition

FROM ubuntu:jammy as spchar
ENV SHOW_PRECENTAGE ""
COPY --from=build build .
COPY docker/spchar.sh spchar.sh
RUN apt update && apt install -y libpng16-16
ENTRYPOINT ["./spchar.sh"]